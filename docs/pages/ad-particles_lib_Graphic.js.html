<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>DocStrap Source: ad-particles/lib/Graphic.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">DocStrap</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="Align.html">Align</a></li><li><a href="AlphaVideoPlayer.html">AlphaVideoPlayer</a></li><li><a href="ArrayUtils.html">ArrayUtils</a></li><li><a href="AudioPlayer.html">AudioPlayer</a></li><li><a href="CanvasBlendMode.html">CanvasBlendMode</a></li><li><a href="CanvasBlur.html">CanvasBlur</a></li><li><a href="CanvasCircle.html">CanvasCircle</a></li><li><a href="CanvasColoring.html">CanvasColoring</a></li><li><a href="CanvasDrawer.html">CanvasDrawer</a></li><li><a href="CanvasElement.html">CanvasElement</a></li><li><a href="CanvasImage.html">CanvasImage</a></li><li><a href="CanvasLineTo.html">CanvasLineTo</a></li><li><a href="CanvasPath.html">CanvasPath</a></li><li><a href="CanvasRect.html">CanvasRect</a></li><li><a href="CanvasShape.html">CanvasShape</a></li><li><a href="CanvasSprite.html">CanvasSprite</a></li><li><a href="CanvasText.html">CanvasText</a></li><li><a href="CanvasTexture.html">CanvasTexture</a></li><li><a href="CanvasTiling.html">CanvasTiling</a></li><li><a href="CanvasTweener.html">CanvasTweener</a></li><li><a href="CanvasUtils.html">CanvasUtils</a></li><li><a href="Clamp.html">Clamp</a></li><li><a href="ColorUtils.html">ColorUtils</a></li><li><a href="Core.html">Core</a></li><li><a href="Countdown.html">Countdown</a></li><li><a href="CssManager.html">CssManager</a></li><li><a href="DateFormatter.html">DateFormatter</a></li><li><a href="DateManager.html">DateManager</a></li><li><a href="DateSchedule.html">DateSchedule</a></li><li><a href="DcsUtils.html">DcsUtils</a></li><li><a href="Device.html">Device</a></li><li><a href="Effects.html">Effects</a></li><li><a href="Emitter.html">Emitter</a></li><li><a href="Expandable.html">Expandable</a></li><li><a href="ExpandableDcs.html">ExpandableDcs</a></li><li><a href="FrameRate.html">FrameRate</a></li><li><a href="Gesture.html">Gesture</a></li><li><a href="GestureBase.html">GestureBase</a></li><li><a href="GestureEvent.html">GestureEvent</a></li><li><a href="GestureEvent.Event.html">GestureEvent.Event</a></li><li><a href="Graphic.Circle.html">Graphic.Circle</a></li><li><a href="Graphic.Image.html">Graphic.Image</a></li><li><a href="Graphic.Rect.html">Graphic.Rect</a></li><li><a href="Graphic.Shape.html">Graphic.Shape</a></li><li><a href="Graphic.Sprite.html">Graphic.Sprite</a></li><li><a href="ImageManager.html">ImageManager</a></li><li><a href="ImageUtils.html">ImageUtils</a></li><li><a href="Loader.html">Loader</a></li><li><a href="LocationUtils.html">LocationUtils</a></li><li><a href="Markup.html">Markup</a></li><li><a href="MathUtils.html">MathUtils</a></li><li><a href="Matrix2D.html">Matrix2D</a></li><li><a href="Matrix3D.html">Matrix3D</a></li><li><a href="MediaEvent.html">MediaEvent</a></li><li><a href="MonetUtils.html">MonetUtils</a></li><li><a href="MotionUtils.html">MotionUtils</a></li><li><a href="NetUtils.html">NetUtils</a></li><li><a href="ObjectUtils.html">ObjectUtils</a></li><li><a href="ParentTransform.html">ParentTransform</a></li><li><a href="Particle.html">Particle</a></li><li><a href="ParticleModel.html">ParticleModel</a></li><li><a href="Ratio.html">Ratio</a></li><li><a href="RecurringSchedule.html">RecurringSchedule</a></li><li><a href="SheetManager.html">SheetManager</a></li><li><a href="SimpleNoise2D.html">SimpleNoise2D</a></li><li><a href="SpritePlayer.html">SpritePlayer</a></li><li><a href="Styles.html">Styles</a></li><li><a href="TextFormat.html">TextFormat</a></li><li><a href="TextSplitType.html">TextSplitType</a></li><li><a href="Timezone.html">Timezone</a></li><li><a href="TzDate.html">TzDate</a></li><li><a href="UIBorder.html">UIBorder</a></li><li><a href="UIButton.html">UIButton</a></li><li><a href="UIButtonFullScreen.html">UIButtonFullScreen</a></li><li><a href="UIButtonMute.html">UIButtonMute</a></li><li><a href="UIButtonPlayPause.html">UIButtonPlayPause</a></li><li><a href="UIButtonReplay.html">UIButtonReplay</a></li><li><a href="UICanvas.html">UICanvas</a></li><li><a href="UIComponent.html">UIComponent</a></li><li><a href="UIControlBar.html">UIControlBar</a></li><li><a href="UIDiv.html">UIDiv</a></li><li><a href="UIEvent.html">UIEvent</a></li><li><a href="UIFlex.html">UIFlex</a></li><li><a href="UIGroup.html">UIGroup</a></li><li><a href="UIImage.html">UIImage</a></li><li><a href="UISlider.html">UISlider</a></li><li><a href="UISplitText.html">UISplitText</a></li><li><a href="UISvg.html">UISvg</a></li><li><a href="UITextField.html">UITextField</a></li><li><a href="UITimeDisplay.html">UITimeDisplay</a></li><li><a href="Vector2D.html">Vector2D</a></li><li><a href="Velvet.html">Velvet</a></li><li><a href="VideoControls.html">VideoControls</a></li><li><a href="VideoPlayer.html">VideoPlayer</a></li><li><a href="YouTubePlayer.html">YouTubePlayer</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: ad-particles/lib/Graphic.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
	@npmpackage
	@module Graphic
	@desc
		Import from &lt;a href="https://github.com/ff0000-ad-tech/ad-particles">ad-particles&lt;/a>
		&lt;br>
		&lt;codeblock>
			// importing into an ES6 class
			import { Graphic } from 'ad-particles'
		&lt;/codeblock>
		&lt;br>&lt;br>
		
		A simple, light weight class for rendering shapes and images on canvas element with assigned style to work with the particle system.
		Graphic.Shape is the parent class that remains netural to keep the flexiblity to create more classes based on needs in different projects.
		&lt;br>&lt;br>

		To keep it practical while maintaining it as light as possible, there are four classes currently available:&lt;br>
		&lt;ul>
			&lt;li>Graphic.Image&lt;/li>
			&lt;li>Graphic.Sprite&lt;/li>
			&lt;li>Graphic.Circle&lt;/li>
			&lt;li>Graphic.Rect&lt;/li>
		&lt;/ul> 
*/
import { MathUtils, ObjectUtils } from 'ad-utils'

const Graphic = {
	DEFAULTSIZE: 10,
	DEFAULTSTYLE: {
		x: 0,
		y: 0,
		alpha: 1,
		scale: 1,
		rotation: 0,
		transformOrigin: { x: 0.5, y: 0.5 },
		color: [255, 0, 0],
		strokeWidth: 0,
		strokeColor: 'rgba(0, 0, 0, 1)'
	}
}

/**
	@npmpackage
	@class Graphic.Shape
	@desc
		The parent class of other Graphic classes. It handles color, alpha, translation, rotation and scaling. 

*/
Graphic.Shape = class {
	static getRGBA = function getRGBA(rgb, alpha) {
		const r = ~~MathUtils.restrict(rgb[0], 0, 255)
		const g = ~~MathUtils.restrict(rgb[1], 0, 255)
		const b = ~~MathUtils.restrict(rgb[2], 0, 255)
		const a = MathUtils.restrict(alpha, 0, 1)

		return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')'
	}

	constructor() {
		this.hasPath = true
	}

	render(ctx, style = {}, frameCount = 0) {
		style = ObjectUtils.defaults(style, this.style)
		style.scale = MathUtils.restrict(style.scale, 0, Infinity)
		style.alpha = MathUtils.restrict(style.alpha, 0, 1)
		const w = this.width * style.scale
		const h = this.height * style.scale

		style.color = Graphic.Shape.getRGBA(style.color, style.alpha)

		ctx.save()

		if (style.alpha &lt; 1 &amp;&amp; !this.hasPath) {
			ctx.globalAlpha = style.alpha
		}

		ctx.translate(w * -style.transformOrigin.x, h * -style.transformOrigin.y)

		if (style.rotation !== 0) {
			const tw = style.x + w * style.transformOrigin.x
			const th = style.y + h * style.transformOrigin.y
			ctx.translate(tw, th)
			ctx.rotate(MathUtils.toRadians(style.rotation))
			ctx.translate(-tw, -th)
		}

		if (this.hasPath) {
			ctx.beginPath()
		}

		this.draw(ctx, style, w, h, frameCount)

		if (this.hasPath) {
			ctx.closePath()
			ctx.fillStyle = style.color
			ctx.fill()

			if (style.strokeWidth > 0) {
				ctx.lineWidth = style.strokeWidth
				ctx.strokeStyle = style.strokeColor
				ctx.stroke()
			}
		}

		ctx.restore()
	}
}

/**
	@npmpackage
	@class Graphic.Image
	@desc
		A class for rendering images on canvas. The size parameter applys to width. The height
		is calculated base the the image width and height ratio and call draw method of the child class.
*/
Graphic.Image = class extends Graphic.Shape {
	constructor(image, size = image.width, style = {}) {
		super()

		this.hasPath = false
		this.image = image
		this.width = size
		this.height = this.width * (image.height / image.width)
		this.style = ObjectUtils.defaults(style, Graphic.DEFAULTSTYLE)
	}

	draw(ctx, style, w, h) {
		ctx.drawImage(this.image, style.x, style.y, w, h)
	}
}

/**
	@npmpackage
	@class Graphic.Circle
	@param {number} size
		diameter of the circle
	@param {object} style
		Default to {@link Graphic.DEFAULTSTYLE}
	@desc
		A class for rendering circles on canvas

*/
Graphic.Circle = class extends Graphic.Shape {
	constructor(size = Graphic.DEFAULTSIZE, style = {}) {
		super()

		this.width = size * 0.5
		this.height = this.width
		this.style = ObjectUtils.defaults(style, Graphic.DEFAULTSTYLE)
	}

	draw(ctx, style, w) {
		ctx.arc(style.x + w * 0.5, style.y + w * 0.5, w, 0, Math.PI * 2)
	}
}

/**
	@npmpackage
	@class Graphic.Rect
	@param {number} width
		width of the rectangle
	@param {number} height
		height of the rectangle
	@param {object} style
		Default to {@link Graphic.DEFAULTSTYLE}
	@desc
		A class for rendering rectangles on canvas.

*/

Graphic.Rect = class extends Graphic.Shape {
	constructor(width = Graphic.DEFAULTSIZ, height = Graphic.DEFAULTSIZ, style = {}) {
		super()

		this.width = width
		this.height = height
		this.style = ObjectUtils.defaults(style, Graphic.DEFAULTSTYLE)
	}

	draw(ctx, style, w, h) {
		ctx.rect(style.x, style.y, w, h)
	}
}

/**
	@npmpackage
	@class Graphic.Sprite
	@param {Image} image
		image of the sprite sheet
	@param {number} size
		display width of per frame
	@param {object} style
		Default to {@link Graphic.DEFAULTSTYLE}
	@param {object} spriteSetting
		Object with the following properties:

		@property {number} frameWidth
			width of per frame 

		@property {number} frameHeight
			height of per frame

		@property {number} frameNumber
			number of total frames

		@property {number} speed
			the speed of the animation

		@property {boolean} loop

	@desc
		A class for rendering spritesheet animation on canvas.

*/

Graphic.Sprite = class extends Graphic.Shape {
	constructor(image, size, style = {}, spriteSetting) {
		super()

		this.hasPath = false
		this.setting = spriteSetting
		this.image = image
		this.oriWidth = image.width
		this.oriHeight = image.height
		this.width = size || this.oriWidth
		this.height = this.width * (this.setting.frameWidth / this.setting.frameHeight)
		this.style = ObjectUtils.defaults(style, Graphic.DEFAULTSTYLE)
		this.frameLen = ~~(1 / this.setting.speed)
		this.colNumber = this.oriWidth / this.setting.frameWidth
	}

	draw(ctx, style, w, h, frameCount) {
		let frameIndex = ~~(frameCount / this.frameLen)
		if (this.setting.loop) {
			frameIndex = frameIndex % this.setting.frameNumber
		} else {
			const fn = this.setting.frameNumber - 1
			frameIndex = frameIndex > fn ? fn : frameIndex
		}

		const fw = this.setting.frameWidth
		const fh = this.setting.frameHeight
		const ratio = w / fw

		const sx = (frameIndex * this.setting.frameWidth) % this.oriWidth
		const sy = ~~(frameIndex / this.colNumber) * this.setting.frameHeight

		ctx.drawImage(this.image, sx, sy, fw, fh, style.x, style.y, fw * ratio, fh * ratio)
	}
}

export default Graphic
</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	DocStrap Copyright © 2012-2015 The contributors to the JSDoc3 and DocStrap projects.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.0-dev</a>
	
		on Thu May 3rd 2018
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : false,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
