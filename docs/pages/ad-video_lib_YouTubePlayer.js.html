<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>DocStrap Source: ad-video/lib/YouTubePlayer.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">DocStrap</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="Align.html">Align</a></li><li><a href="AlphaVideoPlayer.html">AlphaVideoPlayer</a></li><li><a href="ArrayUtils.html">ArrayUtils</a></li><li><a href="AudioPlayer.html">AudioPlayer</a></li><li><a href="CanvasBlendMode.html">CanvasBlendMode</a></li><li><a href="CanvasBlur.html">CanvasBlur</a></li><li><a href="CanvasCircle.html">CanvasCircle</a></li><li><a href="CanvasColoring.html">CanvasColoring</a></li><li><a href="CanvasDisplaceChannel.html">CanvasDisplaceChannel</a></li><li><a href="CanvasDisplacementMap.html">CanvasDisplacementMap</a></li><li><a href="CanvasDrawer.html">CanvasDrawer</a></li><li><a href="CanvasElement.html">CanvasElement</a></li><li><a href="CanvasImage.html">CanvasImage</a></li><li><a href="CanvasLineTo.html">CanvasLineTo</a></li><li><a href="CanvasPath.html">CanvasPath</a></li><li><a href="CanvasRect.html">CanvasRect</a></li><li><a href="CanvasShape.html">CanvasShape</a></li><li><a href="CanvasSprite.html">CanvasSprite</a></li><li><a href="CanvasText.html">CanvasText</a></li><li><a href="CanvasTexture.html">CanvasTexture</a></li><li><a href="CanvasTiling.html">CanvasTiling</a></li><li><a href="CanvasTweener.html">CanvasTweener</a></li><li><a href="CanvasUtils.html">CanvasUtils</a></li><li><a href="Clamp.html">Clamp</a></li><li><a href="ColorUtils.html">ColorUtils</a></li><li><a href="Core.html">Core</a></li><li><a href="CssManager.html">CssManager</a></li><li><a href="DateFormatter.html">DateFormatter</a></li><li><a href="DateManager.html">DateManager</a></li><li><a href="DateSchedule.html">DateSchedule</a></li><li><a href="DcsUtils.html">DcsUtils</a></li><li><a href="Device.html">Device</a></li><li><a href="Effects.html">Effects</a></li><li><a href="Emitter.html">Emitter</a></li><li><a href="Expandable.html">Expandable</a></li><li><a href="ExpandableDcs.html">ExpandableDcs</a></li><li><a href="FrameRate.html">FrameRate</a></li><li><a href="Gesture.html">Gesture</a></li><li><a href="GestureBase.html">GestureBase</a></li><li><a href="GestureEvent.html">GestureEvent</a></li><li><a href="GestureEvent.Event.html">GestureEvent.Event</a></li><li><a href="Graphic.Circle.html">Graphic.Circle</a></li><li><a href="Graphic.Image.html">Graphic.Image</a></li><li><a href="Graphic.Rect.html">Graphic.Rect</a></li><li><a href="Graphic.Shape.html">Graphic.Shape</a></li><li><a href="Graphic.Sprite.html">Graphic.Sprite</a></li><li><a href="ImageManager.html">ImageManager</a></li><li><a href="ImageUtils.html">ImageUtils</a></li><li><a href="Loader.html">Loader</a></li><li><a href="LocationUtils.html">LocationUtils</a></li><li><a href="Markup.html">Markup</a></li><li><a href="MathUtils.html">MathUtils</a></li><li><a href="Matrix2D.html">Matrix2D</a></li><li><a href="Matrix3D.html">Matrix3D</a></li><li><a href="MediaEvent.html">MediaEvent</a></li><li><a href="MonetUtils.html">MonetUtils</a></li><li><a href="MotionUtils.html">MotionUtils</a></li><li><a href="ObjectUtils.html">ObjectUtils</a></li><li><a href="ParentTransform.html">ParentTransform</a></li><li><a href="Particle.html">Particle</a></li><li><a href="ParticleModel.html">ParticleModel</a></li><li><a href="Ratio.html">Ratio</a></li><li><a href="RecurringSchedule.html">RecurringSchedule</a></li><li><a href="SheetManager.html">SheetManager</a></li><li><a href="SimpleNoise2D.html">SimpleNoise2D</a></li><li><a href="SpritePlayer.html">SpritePlayer</a></li><li><a href="Styles.html">Styles</a></li><li><a href="TextFormat.html">TextFormat</a></li><li><a href="TextSplitType.html">TextSplitType</a></li><li><a href="Timezone.html">Timezone</a></li><li><a href="TzDate.html">TzDate</a></li><li><a href="UIBorder.html">UIBorder</a></li><li><a href="UIButton.html">UIButton</a></li><li><a href="UIButtonFullScreen.html">UIButtonFullScreen</a></li><li><a href="UIButtonMute.html">UIButtonMute</a></li><li><a href="UIButtonPlayPause.html">UIButtonPlayPause</a></li><li><a href="UIButtonReplay.html">UIButtonReplay</a></li><li><a href="UICanvas.html">UICanvas</a></li><li><a href="UIComponent.html">UIComponent</a></li><li><a href="UIControlBar.html">UIControlBar</a></li><li><a href="UIDiv.html">UIDiv</a></li><li><a href="UIEvent.html">UIEvent</a></li><li><a href="UIFlex.html">UIFlex</a></li><li><a href="UIGroup.html">UIGroup</a></li><li><a href="UIImage.html">UIImage</a></li><li><a href="UISlider.html">UISlider</a></li><li><a href="UISplitText.html">UISplitText</a></li><li><a href="UISvg.html">UISvg</a></li><li><a href="UITextField.html">UITextField</a></li><li><a href="UITimeDisplay.html">UITimeDisplay</a></li><li><a href="Vector2D.html">Vector2D</a></li><li><a href="Velvet.html">Velvet</a></li><li><a href="Velvet.events.html">Velvet.events</a></li><li><a href="VideoControls.html">VideoControls</a></li><li><a href="VideoPlayer.html">VideoPlayer</a></li><li><a href="YouTubePlayer.html">YouTubePlayer</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: ad-video/lib/YouTubePlayer.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
	@npmpackage
	@class YouTubePlayer
	@desc
		Import from &lt;a href="https://github.com/ff0000-ad-tech/ad-video">ad-video&lt;/a>
		&lt;br>
		&lt;codeblock>
			// importing into an ES6 class
			import { YouTubePlayer } from 'ad-video'
		&lt;/codeblock>
		&lt;br>&lt;br>
		
		This Object creates and manages a YouTube player embed.
		&lt;br>&lt;br>

		The native YouTube API has many flaws in its logic along with several limtations. YouTubePlayer attempts to bridge some of those short comings, 
		while at the same time following as closely as possible the same methods and patterns of our native VideoPlayer.
		&lt;br>&lt;br>

		Something to note: The initial call to the YouTube API actually loads in an iFrame, so there can be a delay 
		when first seeing your player, there is nothing that can be doen about that. Since it is loading an iFrame, things such as the controls, fullscreen
		ability, showing video info are set on the load. This class can toggle those things, but it will cause the whole iFrame to reload. If you are only
		changing videos, with no other updates, there will be a seemless transition to the next video.
		&lt;br>&lt;br>

	@example
		// adds a player on the Main container
		T.videoPlayer = new YouTubePlayer({
			id: 'intro',
			target: T,
			css : {
				x: 0,
				y: 0,
				width : 446,
				height : 250
			},

			videoId: 'EcB59kdjJfw',
			autoPlay: true,
			muted: true,
			quality: 'hd720',
			showInfo: false,
			inlineYouTubeLogo: true,
			allowFullScreen: false,
			allowAnnotations: true,

			onReady: null,
			onComplete : null,
			onPlay: null,
			onPause: null,
			onBuffer: null,
			onFail: null,

			controls: false
		});	
*/
import { UIComponent, UIDiv } from 'ad-ui'
import { FrameRate } from 'ad-events'
import * as MediaEvent from './events/MediaEvent'
import VideoControls from './VideoControls'
import UIPoster from './ui/UIPoster'
import CuePoints from './CuePoints'
// YT from globally available YouTube Player API

function YouTubePlayer(arg) {
	var V = this

	var _initMuted = !!arg.muted

	V.id = (arg.id || '' + Date.now()) + '-youTubePlayer'
	V.css = arg.css

	// create a dummy dom element to dispatch events thru
	V.screen = document.createElement('span')
	V.isReplay = false

	/**
		@memberof YouTubePlayer
		@var {boolean}	paused
			A Boolean representing if the video is playing. 
	*/
	V.paused = !arg.autoPlay

	/**
		@memberof YouTubePlayer
		@var {number} percent
			A Number 0-1 representing the video timeline percent position. 
	*/
	V.percent = 0

	/**
		@memberof YouTubePlayer
		@var {number} currentTime
			A Number representing the video time position. 
	*/
	V.currentTime = 0
	V.duration = 0

	/**
		@memberof YouTubePlayer
		@var {boolean} complete
			A Boolean representing if the video has ended. 
	*/
	V.complete = false

	// Constructor arguments
	/**
		@memberof YouTubePlayer
		@var {function} onReady
			A callback for when the Video is able to be played.  Can be set as optional parameter on instantiation.  
	*/
	V.onReady = arg.onReady || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onComplete
			A callback for when the Video is finished.  Can be set as optional parameter on instantiation.
	*/
	V.onComplete = arg.onComplete || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onFail
			A callback for when the Video fails.  Can be set as optional parameter on instantiation.  
	*/
	V.onFail = arg.onFail || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onBuffer
			A callback for when the Video pauses due to buffering.  Can be set as optional parameter on instantiation.
	*/
	V.onBuffer = arg.onBuffer || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onProgress
			A callback for when as Video progresses while playing.  Can be set as optional parameter on instantiation.
	*/

	V.onProgress = arg.onProgress || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onPlay
			A callback for when as Video plays, helpful since controls are internal to iFrame.  Can be set as optional parameter on instantiation.
	*/
	V.onPlay = arg.onPlay || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onAutoPlay
			A callback for when as Video auto-plays. Can be set as optional parameter on instantiation.
	*/
	V.onAutoPlay = arg.onAutoPlay || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onStop
			A callback for when as Video is stopped. Can be set as optional parameter on instantiation.
	*/
	V.onStop = arg.onStop || function() {}

	/**
		@memberof YouTubePlayer
		@var {function} onPause
			A callback for when as Video pauses, helpful since controls are internal to iFrame. Can be set as optional parameter on instantiation.  */
	V.onPause = arg.onPause || function() {}

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// PRIVATE PROPERTIES
	var _videoId = arg.videoId
	var _autoPlay = arg.autoPlay
	var _sourceCalled = false
	var _readyHeard = false
	var _hasAutoPlayed = false
	var _isStopCalled = false

	// a class level object holding the NEXT state of the player, used in conjunction with getter/setters
	var _classPlayerParams = {
		autoplay: arg.autoPlay ? 1 : 0,
		controls: arg.nativeControls ? 1 : 0,
		showinfo: arg.showInfo ? 1 : 0,
		modestbranding: arg.inlineYouTubeLogo ? 0 : 1,
		fs: arg.allowFullScreen ? 1 : 0,
		rel: arg.showRelatedVideos ? 1 : 0,
		iv_load_policy: arg.allowAnnotations ? 1 : 3,
		vq: arg.quality || 'medium'
	}

	// a player level obect holding the current state of the player when instantiated. Initally equal to _classPlayerParams
	var _currentPlayerParams = {}
	for (var p in _classPlayerParams) {
		_currentPlayerParams[p] = _classPlayerParams[p]
	}

	var _cuePoints = new CuePoints(arg.cuePoints)

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// MARKUP
	arg.id = V.id
	if (!arg.css.hasOwnProperty('backgroundColor')) arg.css.backgroundColor = '#000000'

	/**
		@memberof YouTubePlayer
		@var {UIComponent} container
			A &amp;lt;div>, the top level container for the entire player instance. 
	*/
	V.container = new UIComponent(arg)

	var holder = new UIDiv({
		target: V.container,
		css: {
			width: V.css.width,
			height: V.css.height
		}
	})

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// GETTERS | SETTERS
	Object.defineProperties(V, {
		/**
			@memberof YouTubePlayer
			@var {number} volume
				Changes the volume of the video.  Assign a number, between 0 - 1 to set the volume.  
			@example
				myVideoPlayer.volume = .8;			
		*/
		volume: {
			/*get: function() {
				return _autoPlay;
			},*/
			get: function() {
				return V.player &amp;&amp; V.player.getVolume ? V.player.getVolume() : -1
			},
			set: function(value) {
				V.player.setVolume(value)
			}
		},

		/**
			@memberof YouTubePlayer
			@var {string} source
				Changes the source of the video by passing in a string of the video YouTube ID to set.
			@example
				myVideoPlayer.source = "k_5IXGmoLMY";			
		*/
		source: {
			get: function() {
				return _videoId
			},
			set: function(value) {
				_sourceCalled = true
				_videoId = value

				console.log('YouTubePlayer.source:', value)

				FrameRate.unregister(V, handleTimeUpdate, 3)

				if (_readyHeard) {
					updateSource()
				}
			}
		},

		/**
			@memberof YouTubePlayer
			@var {string} url
				Gets the URL to current playing YouTube video.
			@example
				console.log( myVideoPlayer.url );			
		*/
		url: {
			get: function() {
				return V.player &amp;&amp; V.player.getVideoUrl ? V.player.getVideoUrl() : ''
			}
		},

		/**
			@memberof YouTubePlayer
			@var {boolean} autoPlay
				A boolean to define if the video will automatically play.
			@example
				myVideoPlayer.autoPlay = false;			
		*/
		autoPlay: {
			get: function() {
				return video.autoplay
			},
			set: function(value) {
				_autoPlay = value
			}
		},

		/**
			@memberof YouTubePlayer
			@var {boolean} muted
				A boolean to read if the player is muted
			@example
				console.log( myVideoPlayer.muted );			
		*/
		muted: {
			get: function() {
				return V.player &amp;&amp; V.player.isMuted ? V.player.isMuted() : false
			}
		},

		/* ---------------------------------------------- */
		// GETTERS | SETTERS for on reload / next video

		/**
			@memberof YouTubePlayer
			@var {boolean} nativeControls
				A boolean whether or not the player has nativeControls/progress bar.
				NOTE: Requires a iFrame reload, so only take place on a video load or replay 
			@example
				myVideoPlayer.nativeControls = false;
		*/
		nativeControls: {
			get: function() {
				return _classPlayerParams.controls
			},
			set: function(value) {
				_classPlayerParams.controls = value ? 1 : 0
			}
		},

		/**
			@memberof YouTubePlayer
			@var {boolean} allowFullScreen
				A boolean whether or not the fullscreen button is displayed.
				NOTE: Requires a iFrame reload, so only take place on a video load or replay 
			@example
				myVideoPlayer.allowFullScreen = false;
		*/
		allowFullScreen: {
			get: function() {
				return _classPlayerParams.fs
			},
			set: function(value) {
				_classPlayerParams.fs = value ? 1 : 0
			}
		},

		/**
			@memberof YouTubePlayer
			@var {string} quality
				A string representing the quality type, follows YouTube paradigm, that assigns the playback quality of the video.
				NOTE: Requires a iFrame reload, so only take place on a video load or replay 
			@example
				myVideoPlayer.quality = "hd720";
		*/
		quality: {
			get: function() {
				return _classPlayerParams.vq
			},
			set: function(value) {
				_classPlayerParams.vq = str

				// manually set thru API
				V.player.setPlaybackQuality(str)
				// assign to current params to avoid a player reload unnecessarily
				_currentPlayerParams.vq = str
			}
		}
	})

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// PUBLIC METHODS

	/**
		@memberof YouTubePlayer
		@method hide
		@desc
			Hides the entire player.
		@example
			myVideoPlayer.hide();
	*/

	/*V.hide = function(){
		console.log( V.player )
		V.player.a.style.display = 'none';
	}*/
	V.hide = V.container.hide

	/**
		@memberof YouTubePlayer
		@method show
			Shows the entire player.
		@desc
			myVideoPlayer.show();
	*/
	/*V.show = function(){
		try {
			//console.log( "     try V.player.f.style.removeProperty ( 'display' )")
			V.player.a.style.removeProperty ( 'display' );
		} catch (e) {
			//console.log( '     catch V.player.f.style.display = null;')
			V.player.a.style.display = null;
		}
	}*/
	V.show = V.container.show

	/**
		@memberof YouTubePlayer
		@method play
		@desc
			Plays the current video.
		@example
			myVideoPlayer.play();
	*/
	V.play = function() {
		//console.log( ' -- YouTubePlayer.play()')
		V.player.playVideo()
	}

	/**
		@memberof YouTubePlayer
		@method pause
		@desc
			Pauses the current video.
		@example
			myVideoPlayer.pause();
	*/

	V.pause = function() {
		//console.log( ' -- YouTubePlayer.pause()')
		if (V.player.pauseVideo) V.player.pauseVideo()
	}

	/**
		@memberof YouTubePlayer
		@method seek
		@param {number} sec
			The time to skip the video to in seconds.
		@desc
			Skips the video to a specific time.
		@example
			myVideoPlayer.seek(4);
	*/
	V.seek = function(sec) {
		console.log('seekTo:', sec)
		_cuePoints.seeked = true
		if (sec > V.duration) sec = V.duration
		else V.complete = false
		V.player.seekTo(sec)
	}

	V.stop = function() {
		fireEvent(MediaEvent.STOP, V.onStop)
		// if complete, the seek event will fire a pause event, if not, then
		// set this to the opposite state of paused, because onStateChange not fired when already paused
		// so reset won't get called
		_isStopCalled = V.complete ? true : !V.paused

		V.player.seekTo(0)
		V.pause()
	}

	/**
		@memberof YouTubePlayer
		@method mute
		@desc
			Mutes the Video Player, does not change the volume.
		@example
			myVideoPlayer.mute()
	*/
	V.mute = function() {
		if (V.player.mute) {
			V.player.mute()
			fireEvent(MediaEvent.MUTE)
		}
		V.muted = true
	}

	/**
		@memberof YouTubePlayer
		@method unmute
		@desc
			Unmutes the Video Player, does not change the volume.
		@example
			myVideoPlayer.unmute()
	*/
	V.unmute = function() {
		if (V.player.unMute) {
			V.player.unMute()
			fireEvent(MediaEvent.UNMUTE)
		}
		V.muted = false
	}

	//V.resize = function(){}

	/**
		@memberof YouTubePlayer
		@method addCuePoint
		@param {number} time
			The time, inseconds, to fire the call back.
		@param {function} handler
			A callback function.
		@param {object} params
			Optional parameters to pass back through the call back.
		@desc
			Add to the load queue: a single or array of files or even another Loader.
		@example
			myVideoPlayer.addCuePoint ( 3, handleCuePoint, [ true, .3, {} ])

			function handleCuePoint ( isVar, num, obj ){
				console.log( 'cue point', isVar, num, obj );
			}			
	*/
	V.addCuePoint = function(time, handler, params) {
		_cuePoints.active = true
		var cuePoint = {
			time: time,
			handler: handler,
			frame: -1,
			params: params || null,
			past: false
		}
		_cuePoints.pool.push(cuePoint)

		_cuePoints.pool.sort(function(a, b) {
			return a.time - b.time
		})
		//_cuePoints.first = _cuePoints.pool[0].time;
		console.log('add:', _cuePoints)
	}

	V.addControls = function(obj) {
		if (!V.controls) V.controls = new VideoControls(V, obj)
	}

	V.addPoster = function(obj) {
		if (!V.poster) {
			if (typeof obj == 'string') {
				obj = { source: obj }
			}
			V.poster = new UIPoster(V, obj)
		}
	}

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// PRIVATE METHODS
	function updateSource() {
		console.log('*******> updateSource()')
		if (checkPlayerParams()) {
			_readyHeard = false
			createPlayer()
		} else {
			V.player.cueVideoById(_videoId) //.loadVideoById
		}
	}

	function createPlayer() {
		console.log('++++++++++ YouTubePlayer.createPlayer()')
		if (V.player) {
			V.player.destroy()
		}
		V.player = new YT.Player(holder, {
			width: arg.css.width,
			height: arg.css.height,
			videoId: _videoId,
			playerVars: _currentPlayerParams
		})
		V.player.addEventListener('onReady', handlePlayerReady)
		V.player.addEventListener('onStateChange', handleStateChange)
		V.player.addEventListener('onError', handleFail)
		_hasAutoPlayed = false
	}

	function checkPlayerParams() {
		var recreate = false
		console.log('checkPlayerParams():', _currentPlayerParams)
		for (var p in _classPlayerParams) {
			console.log('     ->', p, '=', _currentPlayerParams[p], _classPlayerParams[p])
			if (_currentPlayerParams[p] != _classPlayerParams[p]) {
				_currentPlayerParams[p] = _classPlayerParams[p]
				recreate = true
				console.log('   ==== RECREATE ====')
			}
		}

		return recreate
	}

	function fireEvent(type, callback, event) {
		if (callback) callback.call(V, event)
		V.screen.dispatchEvent(new CustomEvent(type))
	}

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// EVENT HANDLERS
	function handlePlayerReady(event) {
		console.log(' -- READY -- handlePlayerReady()')
		_readyHeard = true
		console.log('\t\t muted:', V.muted)
		if (_sourceCalled) {
			updateSource()
			return
		}

		//V.duration = V.player.getDuration();

		_initMuted ? V.player.mute() : V.player.unMute()

		fireEvent(MediaEvent.READY, V.onReady, event)
		console.log('\t\t after ready fire, muted:', V.muted)
		if (arg.autoPlay) V.play()
	}

	function handleStateChange(event) {
		console.log(' -- YoutubePlayer stageChange()')
		switch (event.data) {
			// YT.PlayerState.UNSTARTED
			case -1:
				console.log('\t UNSTARTED = -1')
				_initMuted ? V.player.mute() : V.player.unMute()
				V.paused = true
				break

			// YT.PlayerState.BUFFERING
			case 3:
				console.log('\t BUFFERING = 3')
				fireEvent(MediaEvent.BUFFER, V.onBuffer, event)
				break

			// YT.PlayerState.PLAYING
			case 1:
				console.log('\t PLAYING = 1', V.player.getDuration())
				V.duration = V.player.getDuration()
				V.paused = false
				V.complete = false

				// checks for a SEEK faux event, for use with cue points
				if (Math.abs(V.player.getCurrentTime() - V.currentTime) > 0.5) {
					_cuePoints.seeked = true
				}

				FrameRate.register(V, handleTimeUpdate, 3)

				if (_autoPlay &amp;&amp; !_hasAutoPlayed) {
					_hasAutoPlayed = true
					fireEvent(MediaEvent.AUTOPLAY, V.onAutoPlay, event)
				} else {
					fireEvent(MediaEvent.PLAY, V.onPlay, event)
				}

				V.isReplay = false
				break

			// YT.PlayerState.ENDED
			case 0:
				console.log('\t ENDED = 0')

				// this ensures the ue points get reset
				_cuePoints.seeked = true

				V.isReplay = true
				//V.paused = true;
				V.complete = true
				fireEvent(MediaEvent.COMPLETE, V.onComplete, event)

			// YT.PlayerState.PAUSED
			case 2:
				console.log('\t PAUSED = 2')

				FrameRate.unregister(V, handleTimeUpdate, 3)
				if (!_isStopCalled) {
					fireEvent(MediaEvent.PAUSE, V.onPause, event)
				}
				_isStopCalled = false
				V.paused = true
				break

			case 5:
				console.log('\t video cued = 5')
				break
		}
	}

	function handleTimeUpdate() {
		V.currentTime = V.player.getCurrentTime()
		V.percent = V.currentTime / V.duration

		//console.log( '-#####-', V.player.getPlayerState(), ':', V.currentTime, '/', V.duration, '|', V.percent )
		fireEvent(MediaEvent.PROGRESS, V.onProgress)

		_cuePoints.check(V, V.currentTime)

		if (V.player.getCurrentTime() >= V.player.getDuration()) {
			V.pause()
		}
	}

	function handleFail(event) {
		console.log('YouTubePlayer.handleFail()')
		fireEvent(MediaEvent.FAIL, V.onFail, event)
	}

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// COMPONENTS
	if (arg.poster) V.addPoster(arg.poster)

	if (arg.controls) V.addControls(arg.controls)

	/* ------------------------------------------------------------------------------------------------------------------------------- */
	// INIT
	createPlayer()

	return V
}

export default YouTubePlayer
</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	DocStrap Copyright Â© 2012-2015 The contributors to the JSDoc3 and DocStrap projects.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.0-dev</a>
	
		on Wed Mar 13th 2019
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : false,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
