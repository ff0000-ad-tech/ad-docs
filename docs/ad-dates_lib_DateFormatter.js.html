<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>DocStrap Source: ad-dates/lib/DateFormatter.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">DocStrap</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-MathUtils.html">MathUtils</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="AdManager.html">AdManager</a></li><li><a href="Align.html">Align</a></li><li><a href="AlphaVideoPlayer.html">AlphaVideoPlayer</a></li><li><a href="ArrayUtils.html">ArrayUtils</a></li><li><a href="Async.html">Async</a></li><li><a href="AudioPlayer.html">AudioPlayer</a></li><li><a href="CanvasBlendMode.html">CanvasBlendMode</a></li><li><a href="CanvasBlur.html">CanvasBlur</a></li><li><a href="CanvasCircle.html">CanvasCircle</a></li><li><a href="CanvasColoring.html">CanvasColoring</a></li><li><a href="CanvasDrawer.html">CanvasDrawer</a></li><li><a href="CanvasElement.html">CanvasElement</a></li><li><a href="CanvasImage.html">CanvasImage</a></li><li><a href="CanvasLineTo.html">CanvasLineTo</a></li><li><a href="CanvasPath.html">CanvasPath</a></li><li><a href="CanvasRect.html">CanvasRect</a></li><li><a href="CanvasShape.html">CanvasShape</a></li><li><a href="CanvasSprite.html">CanvasSprite</a></li><li><a href="CanvasText.html">CanvasText</a></li><li><a href="CanvasTexture.html">CanvasTexture</a></li><li><a href="CanvasTiling.html">CanvasTiling</a></li><li><a href="CanvasTweener.html">CanvasTweener</a></li><li><a href="CanvasUtils.html">CanvasUtils</a></li><li><a href="Clamp.html">Clamp</a></li><li><a href="ColorUtils.html">ColorUtils</a></li><li><a href="Countdown.html">Countdown</a></li><li><a href="CssManager.html">CssManager</a></li><li><a href="DateFormatter.html">DateFormatter</a></li><li><a href="DateManager.html">DateManager</a></li><li><a href="DateSchedule.html">DateSchedule</a></li><li><a href="DcsUtils.html">DcsUtils</a></li><li><a href="Device.html">Device</a></li><li><a href="Effects.html">Effects</a></li><li><a href="Expandable.html">Expandable</a></li><li><a href="ExpandableDcs.html">ExpandableDcs</a></li><li><a href="FrameRate.html">FrameRate</a></li><li><a href="Gesture.html">Gesture</a></li><li><a href="GestureBase.html">GestureBase</a></li><li><a href="GestureEvent.html">GestureEvent</a></li><li><a href="GestureEvent.Event.html">GestureEvent.Event</a></li><li><a href="ImageManager.html">ImageManager</a></li><li><a href="ImageUtils.html">ImageUtils</a></li><li><a href="LiveScoring.html">LiveScoring</a></li><li><a href="LiveScoringData.html">LiveScoringData</a></li><li><a href="LiveScoringEvent.html">LiveScoringEvent</a></li><li><a href="LocationUtils.html">LocationUtils</a></li><li><a href="Markup.html">Markup</a></li><li><a href="Matrix2D.html">Matrix2D</a></li><li><a href="Matrix3D.html">Matrix3D</a></li><li><a href="MediaEvent.html">MediaEvent</a></li><li><a href="MonetUtils.html">MonetUtils</a></li><li><a href="MotionUtils.html">MotionUtils</a></li><li><a href="NetUtils.html">NetUtils</a></li><li><a href="ObjectUtils.html">ObjectUtils</a></li><li><a href="ParentTransform.html">ParentTransform</a></li><li><a href="PrepareCore.html">PrepareCore</a></li><li><a href="Ratio.html">Ratio</a></li><li><a href="RecurringSchedule.html">RecurringSchedule</a></li><li><a href="SheetManager.html">SheetManager</a></li><li><a href="SimpleNoise2D.html">SimpleNoise2D</a></li><li><a href="Styles.html">Styles</a></li><li><a href="TextFormat.html">TextFormat</a></li><li><a href="TextSplitType.html">TextSplitType</a></li><li><a href="Timezone.html">Timezone</a></li><li><a href="TzDate.html">TzDate</a></li><li><a href="UIBorder.html">UIBorder</a></li><li><a href="UIButton.html">UIButton</a></li><li><a href="UIButtonFullScreen.html">UIButtonFullScreen</a></li><li><a href="UIButtonMute.html">UIButtonMute</a></li><li><a href="UIButtonPlayPause.html">UIButtonPlayPause</a></li><li><a href="UIButtonReplay.html">UIButtonReplay</a></li><li><a href="UICanvas.html">UICanvas</a></li><li><a href="UIComponent.html">UIComponent</a></li><li><a href="UIControlBar.html">UIControlBar</a></li><li><a href="UIDiv.html">UIDiv</a></li><li><a href="UIEvent.html">UIEvent</a></li><li><a href="UIGroup.html">UIGroup</a></li><li><a href="UIImage.html">UIImage</a></li><li><a href="UISlider.html">UISlider</a></li><li><a href="UISplitText.html">UISplitText</a></li><li><a href="UISvg.html">UISvg</a></li><li><a href="UITextField.html">UITextField</a></li><li><a href="UITimeDisplay.html">UITimeDisplay</a></li><li><a href="Vector2D.html">Vector2D</a></li><li><a href="Velvet.html">Velvet</a></li><li><a href="VideoControls.html">VideoControls</a></li><li><a href="VideoPlayer.html">VideoPlayer</a></li><li><a href="YouTubePlayer.html">YouTubePlayer</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#add">add</a></li><li><a href="global.html#addiFrame">addiFrame</a></li><li><a href="global.html#addSvg">addSvg</a></li><li><a href="global.html#get">get</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: ad-dates/lib/DateFormatter.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
	@class DateFormatter

	@classdesc
		&lt;a href="https://github.com/ff0000-ad-tech/ad-dates">Github repo&lt;/a>
		&lt;br>&lt;br>
		
		This class provides a collection of year, month, date labels along with a utility for mananipulating
		a TzDate/Date object.		
*/
import { TextUtils } from 'ad-utils'
import TzDate from './TzDate'

var DateFormatter = new function() {
	var D = this

	D.MS_PER_SECOND = 1000
	D.MS_PER_MINUTE = 6e4 // 1000 * 60;
	D.MS_PER_HOUR = 36e5 // D.MS_PER_MINUTE * 60;
	D.MS_PER_DAY = 864e5 // D.MS_PER_HOUR * 24;
	D.MS_PER_WEEK = 6048e5 // D.MS_PER_DAY * 7;

	/**
		@memberOf DateFormatter	
		@method adjust
		@property {TzDate|Date} date
			The date that will be the starting point for adjustment
		@property {Object} times
			An Object of time keys to adjust the date with. Positive numbers will increase the time, while negative numbers
			will decrement it. The accepted keys are: week, day, hour, minute, second
		@returns {TzDate|Date}
		@desc
			Returns the same type of Object provided: TzDate returns TzDate, Date returns Date

		&lt;codeblock>
			// adjust the time of a TzDate
			var myTzDate = new TzDate({
				datetime : [ '2017-12-31 12:00:00', Timezone.UTC ]
			})
			var adjustedTzDate = DateFormatter.adjust( myTzDate, { day:-1.5, hour:4.2, minute:90 });
			// Sat Dec 30 2017 05:42:00 UTC


			// adjust the time of a regualar Date object
			var myDate = new Date(2017,0,1)
			var adjustedDate = DateFormatter.adjust( myDate, { day:-1.5, hour:4.2, minute:90 });
			// Fri Dec 30 2016 17:42:00 GMT-0800 (PST)
		&lt;/codeblock>
	*/
	D.adjust = function(date, times) {
		var dateAdj
		if (date._isTzDate) {
			dateAdj = date.clone()
		} else {
			dateAdj = new Date(date)
		}

		for (var key in times) {
			var cons = 'MS_PER_' + key.toUpperCase()
			var val = D[cons]
			var add = times[key] * val
			// console.log( 'key:', key, times[key] )
			// console.log( '\tcons:', cons )
			// console.log( '\tval:', val )
			// console.log( '\tadd:', add )
			dateAdj.setTime(dateAdj.getTime() + add)
		}
		// console.log( 'date:', date )
		// console.log( 'dateAdj:', dateAdj )
		return dateAdj
	}

	D.getNumericSuffixFor = function(value, includeDate) {
		var value = value.toString()
		var lastNumber = value.slice(value.length - 1)
		var labels = D.getLabels()
		var output = labels.TH

		switch (lastNumber) {
			case '1':
				if (value != '11') output = labels.ST
				break
			case '2':
				if (value != '12') output = labels.ND
				break
			case '3':
				if (value != '13') output = labels.RD
				break
		}

		return (includeDate ? value : '') + output
	}

	D.format = function(tzDate, format, args) {
		// YYYY - 2017
		// YY - 17
		// MMMM - September
		// MMM - Sept
		// MM - 09, 10, 11
		// M - 9, 10, 11
		// DDDD - Monday
		// DDD = Mon
		// DD - 08, 09, 10 (date)
		// D - 8, 9, 10
		// Do - 1st, 2nd, 3rd, 4th
		// HH - 0...23 > 09, 10, 11
		// H - 0...23 > 9, 10, 11
		// hh - 1...12 > 09, 10, 11
		// h - 1...12 > 9, 10, 11
		// mm - 0...59 > 09, 10, 11
		// m - 0...59 > 9, 10, 11
		// ss - 0...59 > 09, 10, 11
		// s - 0...59 > 9, 10, 11
		// T - 7:00, 8:15
		// t - 7, 8:15
		// a - am pm
		// z - timezone abbreviation
		// ^ - toUpperCase()

		// args - language, weekday exceptions, month exceptions
		args = args || {}

		var tz = args.inTimezone || tzDate.outputTimezone
		var language = args.language

		var dateIn = tzDate.getIn(tz)
		console.log(".format( '" + format + "' )")

		var labels = D.getLabels(language)
		var month = dateIn.getMonth()
		var hours = dateIn.getHours()
		var minutes = dateIn.getMinutes()

		// ${YYYY}
		var result = format.replace(/\$\{(.*?)\}/g, function(match, token) {
			var output = token
			var trim = 0 // only used for year
			var padding
			var needsLabel
			var upper = false
			var keep = true

			// searches for ^ char for toUpperCase()
			token.replace(/(.+)(\^)/, function(match3, token3) {
				token = token3
				upper = true
				console.log('\t\t\t', match3, token3)
			})

			// check for a set of 2, except Y. flags padding then converts to single character MM > M
			if (token.length == 2) {
				token.replace(/(?![Yo])([a-zA-Z]).*?\1/, function(match2, token2) {
					token = token2.substr(0, 1)
					console.log('\t\t', match2, token2, token)
					padding = 2
				})
			}

			switch (token) {
				case 'YY':
					trim = -2
				case 'YYYY':
					output = ('' + dateIn.getFullYear()).slice(trim)
					break

				case 'M':
					output = month + 1
					break
				case 'MMM':
					output = labels.MONTHS_ABRV[month]
					break
				case 'MMMM':
					output = labels.MONTHS_FULL[month]
					break

				case 'D':
					output = dateIn.getDate()
					break
				case 'Do':
					output = D.getNumericSuffixFor(dateIn.getDate(), true)
					break
				case 'DDD':
					output = labels.WEEKDAYS_ABRV[dateIn.getDay()]
					break
				case 'DDDD':
					output = labels.WEEKDAYS_FULL[dateIn.getDay()]
					break

				case 't':
					keep = minutes > 0
				case 'T':
					output = hours
					if (keep) {
						output += ':' + TextUtils.pad(minutes, 2)
					}
					break

				case 'H':
					output = hours
					break

				case 'h':
					output = hours % 12
					if (output == 0) {
						output = 12
					}
					break

				case 'm':
					output = minutes
					break

				case 's':
					output = dateIn.getSeconds()
					break

				case 'a':
					output = hours >= 12 ? 'pm' : 'am'
					break

				case 'z':
					output = tz.abbr
					break
			}

			if (padding) {
				output = TextUtils.pad(output, padding)
			}

			if (upper) {
				output = output.toUpperCase()
			}

			console.log('\t', match, token, output)

			return output
		})

		// console.log( '&lt;' )
		return result
	}

	// -------------------------------------------------------------------------------------------------------------------
	// LABELS
	/**
		@memberOf DateFormatter	
		@var language
		@desc
			This controls what language date-messaging will use. 
	*/
	D.language = 'english'

	var _languageLabels = {
		english: {
			MONTHS_FULL: [
				'January',
				'February',
				'March',
				'April',
				'May',
				'June',
				'July',
				'August',
				'September',
				'October',
				'November',
				'December'
			],
			MONTHS_ABRV: ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'],
			MONTHS_EXCP: ['', '', '', '', '', '', '', '', 'sept', '', '', ''],

			WEEKDAYS_FULL: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
			WEEKDAYS_ABRV: ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'],
			WEEKDAYS_EXCP1: ['', '', 'tues', 'wednes', 'thur', '', ''],
			WEEKDAYS_EXCP2: ['', '', '', '', 'thurs', '', ''],

			ST: 'st',
			ND: 'nd',
			RD: 'rd',
			TH: 'th',
			OF: 'of',

			TOMORROW: 'Tomorrow',
			TODAY: 'Today',
			TONIGHT: 'Tonight',
			NOW: 'Live Now',
			PAST: 'Past'
		},
		spanish: {
			MONTHS_FULL: [
				'enero',
				'febrero',
				'marzo',
				'abril',
				'mayo',
				'junio',
				'julio',
				'agosto',
				'septiembre',
				'octubre',
				'noviembre',
				'diciembre'
			],
			MONTHS_ABRV: ['enero', 'feb', 'marzo', 'abr', 'mayo', 'jun', 'jul', 'agosto', 'sept', 'oct', 'nov', 'dic'],
			MONTHS_EXCP: ['', '', '', '', '', '', '', '', 'sep', '', '', ''],

			WEEKDAYS_FULL: ['domingo', 'lunes', 'martes', 'mi&amp;#201;rcoles', 'jueves', 'viernes', 's&amp;#193;bado'],
			WEEKDAYS_ABRV: ['dom', 'lun', 'mar', 'mi&amp;#201;r', 'jue', 'vier', 's&amp;#193;b'],
			WEEKDAYS_EXCP1: ['', '', 'tues', 'wednes', 'thur', '', ''],
			WEEKDAYS_EXCP2: ['', '', '', '', 'thurs', '', ''],

			ST: 'ro',
			ND: 'ndo',
			RD: 'rd',
			TH: 'th',
			OF: 'de',

			TOMORROW: 'ma&amp;#209;ana',
			TODAY: 'hoy',
			TONIGHT: 'esta noche',
			NOW: 'en vivo',
			PAST: 'past'
		}
	}

	D.monthsFull = 'MONTHS_FULL'
	D.monthsAbrv = 'MONTHS_ABRV'
	D.weekdaysFull = 'WEEKDAYS_FULL'
	D.weekdaysAbrv = 'WEEKDAYS_ABRV'

	/**
		@memberOf DateFormatter	
		@method 
			
		@memberOf DateFormatter	
		@method getLabels
		@property {String} language
			The language that will be used.  Currently only "english" and "spanish".  Defaults to the value set on the class level Dateformatter.langauge
		@returns {TzDate|Date}
		@desc
			Returns an objects that defines labels that date-messaging will use in the ad, used directly by DateSchedule and RecurringSchedule 
	*/
	D.getLabels = function(language) {
		return _languageLabels[language || D.language]
	}

	// D.applyMonthException = function() {
	// 	applyExceptions ( 'MONTHS', '' );
	// }

	// D.applyWeekDayException = function ( index ) {
	// 	applyExceptions ( 'WEEKDAYS', index );
	// }

	// function applyExceptions ( type, index ){
	// 	for ( var key in _languageLabels ){
	// 		var lang = _languageLabels[key];
	// 		var base = lang [ type + '_ABRV' ];
	// 		var next = lang [ type + '_EXCP' + index ];
	// 		for ( var i = 0; i &lt; base.length; i++ ){
	// 			if ( next[i] != '' ){
	// 				base[i] = next[i]
	// 			}
	// 		}
	// 	}
	// }
}()

export default DateFormatter
</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	DocStrap Copyright Â© 2012-2015 The contributors to the JSDoc3 and DocStrap projects.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.0-dev</a>
	
		on Tue Jan 23rd 2018
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : false,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
